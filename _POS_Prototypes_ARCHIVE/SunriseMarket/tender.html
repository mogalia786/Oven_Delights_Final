<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Sunrise Market POS - Tender</title>
  <style>
    :root { --sun:#A62323; --sun-dark:#7C1717; --slate:#023047; --sky:#8ECAE6; --leaf:#219EBC; --cream:#FEF9F2; }
    *{box-sizing:border-box}
    body{margin:0;font-family:Source Sans 3, system-ui, Segoe UI, Roboto, Arial, sans-serif;background:linear-gradient(180deg,#fffdf7,#fff6e5 60%,#fffdf7);color:#1e293b}
    header{display:flex;justify-content:space-between;align-items:center;padding:14px 18px;background:linear-gradient(0deg,var(--sun),var(--sun-dark));border-bottom:1px solid #6e1212;color:#fff}
    .brand{display:flex;align-items:center;gap:10px;font-family:Raleway, Helvetica, Arial, sans-serif;font-weight:800;color:#fff;font-size:22px}
    .brand img{height:36px;border-radius:6px}
    .container{display:grid;grid-template-columns:2fr 1fr;gap:14px;padding:16px}
    .panel{background:#fff;border:1px solid #eee;border-radius:16px;box-shadow:0 6px 20px rgba(0,0,0,.06)}
    .summary{padding:16px}
    .line{display:flex;justify-content:space-between;border-bottom:1px dashed #e2e8f0;padding:8px 0}
    .tot{border-top:1px solid #e2e8f0;margin-top:10px;padding-top:10px;font-size:18px}
    .tenders{padding:16px;display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:10px}
    .btn{padding:16px;border-radius:14px;border:2px solid #e2e8f0;background:#fff;cursor:pointer;text-align:center;font-weight:800;font-size:18px}
    .btn.primary{background:var(--sun);color:#fff;border:none}
    .row{display:flex;gap:8px}
    .input{flex:1;padding:12px;border-radius:10px;border:1px solid #e2e8f0}
    .actions{display:flex;gap:10px;justify-content:flex-end;padding:16px}
    a{color:inherit;text-decoration:none}

    /* Receipt preview */
    .receipt{background:#fff;border:1px solid #eee;border-radius:12px;padding:14px;margin:12px 16px}
    .receipt header{display:flex;justify-content:space-between;align-items:center;background:none;border:none;color:#475569;padding:0;margin-bottom:8px}
    .receipt .logo{height:36px}
    .receipt .rl{display:flex;justify-content:space-between;border-bottom:1px dashed #e2e8f0;padding:6px 0}
    .muted{color:#64748b;font-size:12px}

    /* Keypad modal */
    .modal{position:fixed;inset:0;background:rgba(0,0,0,.45);display:none;align-items:center;justify-content:center;padding:14px}
    .sheet{width:520px;max-width:92vw;background:#fff;border-radius:16px;border:1px solid #eee;box-shadow:0 30px 80px rgba(0,0,0,.25);overflow:hidden}
    .sheet header{background:linear-gradient(0deg,var(--sun),var(--sun-dark));color:#fff;padding:12px 16px;border:none}
    .pad{display:grid;grid-template-columns:repeat(3,1fr);gap:8px;padding:12px}
    .pad .k{padding:18px;border-radius:14px;border:2px solid #e2e8f0;background:#fff;font-size:22px;font-weight:800;text-align:center;cursor:pointer}
    .pad .done{grid-column: span 3; background:var(--sun); color:#fff; border:none}
    .amt{padding:12px 16px;font-size:22px;font-weight:800}

    /* Drawer overlay */
    .drawer-ov{position:fixed;inset:0;background:rgba(0,0,0,.6);display:none;align-items:center;justify-content:center}
    .drawer-card{background:#fff;border-radius:16px;padding:14px;border:1px solid #eee;box-shadow:0 20px 60px rgba(0,0,0,.3)}
    .drawer-card img{width:560px;max-width:92vw;border-radius:12px}
  </style>
</head>
<body>
  <header>
    <div class="brand"><img src="file:///C:/Users/mogal/Pictures/Screenshots/Screenshot%202025-07-26%20024200.png" alt="Oven Delights"/> Oven Delights — Tender</div>
    <div>Order #S-004217</div>
  </header>
  <div class="container">
    <section class="panel summary">
      <h3>Order Summary</h3>
      <div id="sumLines"></div>
      <div class="line"><span>Subtotal</span><strong id="sumSub">R 0.00</strong></div>
      <div class="line"><span>VAT (15%)</span><strong id="sumVat">R 0.00</strong></div>
      <div class="tot"><span>Total</span><strong id="sumTotal">R 0.00</strong></div>
      <div class="receipt">
        <header>
          <img class="logo" src="file:///C:/Users/mogal/Pictures/Screenshots/Screenshot%202025-07-26%20024200.png" alt="Oven Delights"/>
          <div class="muted">Oven Delights • Tender Preview</div>
        </header>
        <div id="rcptLines"></div>
        <div class="rl"><span>Subtotal</span><strong id="rcptSub">R 0.00</strong></div>
        <div class="rl"><span>VAT (15%)</span><strong id="rcptVat">R 0.00</strong></div>
        <div class="rl" style="font-weight:700"><span>Total</span><strong id="rcptTot">R 0.00</strong></div>
        <div class="muted">Thank you for shopping with us!</div>
      </div>
    </section>
    <section class="panel">
      <img class="hero" src="https://images.unsplash.com/photo-1556745757-8d76bdb6984b?q=80&w=1200&auto=format&fit=crop" alt="Tender Payment" />
      <div class="tenders">
        <div class="btn" id="btnCash">Cash (F1)</div>
        <div class="btn" id="btnCard">Card (F2)</div>
        <div class="btn">Voucher (F3)</div>
        <div class="btn">Account (F4)</div>
        <div class="btn">Split (F5)</div>
        <div class="btn">Loyalty (F6)</div>
      </div>
      <div class="summary">
        <div class="row">
          <input class="input" placeholder="Amount received (Cash)" />
          <div class="btn">Exact</div>
        </div>
      </div>
      <div class="actions">
        <a class="btn" href="index.html">Back</a>
        <a class="btn primary" id="btnComplete" href="complete.html">Complete (F12)</a>
      </div>
      <div class="summary">
        <img class="drawer" src="https://images.unsplash.com/photo-1603252109303-2751441dd157?q=80&w=1200&auto=format&fit=crop" alt="Cash Drawer" />
      </div>
    </section>
  </div>

  <!-- Keypad Modal -->
  <div class="modal" id="modal">
    <div class="sheet">
      <header><strong id="padTitle">Enter Amount</strong></header>
      <div class="amt" id="padAmt">R 0.00</div>
      <div class="pad" id="pad">
        <div class="k">7</div><div class="k">8</div><div class="k">9</div>
        <div class="k">4</div><div class="k">5</div><div class="k">6</div>
        <div class="k">1</div><div class="k">2</div><div class="k">3</div>
        <div class="k">0</div><div class="k">.</div><div class="k" id="bk">⌫</div>
        <div class="k done" id="done">Done</div>
      </div>
    </div>
  </div>

  <!-- Drawer Overlay -->
  <div class="drawer-ov" id="drawerOv">
    <div class="drawer-card">
      <img src="https://images.unsplash.com/photo-1603252109303-2751441dd157?q=80&w=1200&auto=format&fit=crop" alt="Drawer"/>
      <div style="text-align:center;font-weight:800;margin-top:8px">Drawer Opened • Provide Change: <span id="changeAmt">R 0.00</span></div>
    </div>
  </div>

  <script>
    const VAT = 0.15;
    function format(n){ return 'R ' + n.toFixed(2); }
    // Render items from localStorage
    function renderFromStorage(){
      let items = [];
      try{ items = JSON.parse(localStorage.getItem('pos_cart')||'[]') || []; }catch{}
      const sumLines = document.getElementById('sumLines');
      const rcptLines = document.getElementById('rcptLines');
      sumLines.innerHTML = '';
      rcptLines.innerHTML = '';
      let sub = 0;
      items.forEach(it =>{
        const line = document.createElement('div');
        line.className = 'line';
        line.innerHTML = `<span>${it.name} × ${it.qty}</span><strong>${format(it.qty * it.price)}</strong>`;
        sumLines.appendChild(line);
        const rl = document.createElement('div');
        rl.className = 'rl';
        rl.innerHTML = `<span>${it.name} × ${it.qty}</span><strong>${format(it.qty * it.price)}</strong>`;
        rcptLines.appendChild(rl);
        sub += it.qty * it.price;
      });
      const vat = Math.round((sub * VAT) * 100)/100;
      const tot = Math.round((sub + vat) * 100)/100;
      document.getElementById('sumSub').textContent = format(sub);
      document.getElementById('sumVat').textContent = format(vat);
      document.getElementById('sumTotal').textContent = format(tot);
      document.getElementById('rcptSub').textContent = format(sub);
      document.getElementById('rcptVat').textContent = format(vat);
      document.getElementById('rcptTot').textContent = format(tot);
      return { sub, vat, tot };
    }
    const totals = renderFromStorage();

    // Keypad handling
    const modal = document.getElementById('modal');
    const padAmt = document.getElementById('padAmt');
    const pad = document.getElementById('pad');
    const done = document.getElementById('done');
    let buffer = '';
    let mode = 'cash'; // or 'card'
    function openPad(kind){ mode = kind; buffer=''; padAmt.textContent = 'R 0.00'; document.getElementById('padTitle').textContent = kind==='cash' ? 'Enter Cash Received' : 'Enter Card Amount'; modal.style.display='flex'; }
    function closePad(){ modal.style.display='none'; }
    pad.addEventListener('click', (e)=>{
      const k = e.target.closest('.k'); if(!k) return;
      const val = k.textContent.trim();
      if(k.id==='bk'){ buffer = buffer.slice(0,-1); }
      else if(k.id==='done'){ return; }
      else { buffer += val; }
      const n = parseFloat(buffer.replace(/[^0-9.]/g,'')) || 0;
      padAmt.textContent = format(n);
    });
    done.addEventListener('click', ()=>{
      const amt = parseFloat((buffer||'0').replace(/[^0-9.]/g,'')) || 0;
      if(mode==='cash'){
        const change = Math.max(0, Math.round((amt - totals.tot)*100)/100);
        document.getElementById('changeAmt').textContent = format(change);
        document.getElementById('drawerOv').style.display='flex';
        setTimeout(()=>{ document.getElementById('drawerOv').style.display='none'; }, 2500);
      }
      closePad();
    });
    document.getElementById('btnCash').addEventListener('click', ()=> openPad('cash'));
    document.getElementById('btnCard').addEventListener('click', ()=> openPad('card'));

    // Complete clears cart
    document.getElementById('btnComplete').addEventListener('click', ()=>{ localStorage.removeItem('pos_cart'); });
  </script>
</body>
</html>
